# Отчёт по лабораторной работе №1

Тема: Рефакторинг архитектуры основного модуля серверной части CRM-системы с внедрением Onion и CQS для повышения масштабируемости и поддерживаемости.
Цель работы: научиться анализировать поставленную задачу, формулировать функциональные и нефункциональные требования к проектируемой системе.

# Перечень заинтересованных лиц (стейкхолдеров)

Менеджер по работе с клиентами (основной пользователь): Сотрудник компании, который ежедневно использует систему для управления клиентами, задачами, ведения календаря и обработки финансовых операций. Заинтересован в удобстве, скорости и надежности системы.

Руководитель отдела продаж/обслуживания: использует систему для контроля работы менеджеров, формирования отчетов, анализа показателей. Заинтересован в достоверности данных, возможности аналитики и масштабировании системы при росте команды.

Разработчик (команда сопровождения): Программисты, которые будут поддерживать, дорабатывать и исправлять ошибки в системе после рефакторинга. Заинтересованы в чистоте кода, модульности, тестируемости, понятной архитектуре.

Тестировщик (QA-инженер): специалист, отвечающий за обеспечение качества системы. Заинтересован в возможности создания автоматизированных тестов (unit, интеграционных) для отдельных модулей и команд/запросов.

Технический лидер: заинтересован в достижении целевых архитектурных свойств (поддерживаемость, масштабируемость), соблюдении принципов проектирования (SOLID, CQRS, Onion) и создании устойчивой к изменениям кодовой базы.

# Перечень функциональных требований

Функциональные требования описывают, что должна делать система для пользователей (стейкхолдеров 1-2).

Система должна обеспечивать управление клиентами: создание, просмотр, редактирование, поиск и фильтрацию карточек клиентов.

Система должна предоставлять возможность работы с задачами в канбане: создание задач, перемещение задач между этапами (столбцами), назначение исполнителей, установка сроков.

Система должна интегрировать календарь задач и встреч: отображение задач и событий в календарной форме, создание новых событий, привязка событий к клиентам.

Система должна позволять проводить финансовые операции: регистрацию сделок, создание счетов, отображение истории платежей по клиенту.

Система должна формировать отчеты и аналитику: базовые отчеты по активности менеджеров, статусу сделок, финансовым показателям (для руководителя).

# Диаграмма вариантов использования

 <img width="709" height="530" alt="ZLJ1Qjj04BqBz0-BBssX-eMIub9ooIKaz18eYxHrbYXh8wrFRS5kINDmeFHKAALDcto0Okn6EBRo2xD_b9crh6XZ1VSWO-tCU_FcxOosKiqJtJ-EVIyMxpJJNPR8pg5caKn4g6LN-PxlyL1t4zQ2dp251JuJ-0TJCpXGS0i5CmF8u0eAymcc1yeC6SpW1dBAnQCCvf2t64_P3bUy8" src="https://github.com/user-attachments/assets/428b78d2-062b-416e-859f-0b585d6f18be" />


# Перечень сделанных предположений

Предполагается, что рефакторингу подвергается работающая CRM-система с существующей бизнес-логикой и базой данных. Цель — не добавление новой функциональности, а улучшение архитектуры.

Предполагается, что система имеет классическую клиент-серверную архитектуру с веб-клиентом, взаимодействующим с RESTful API эндпоинтами серверного модуля.

Предполагается, что команда разработки готова принять новые архитектурные парадигмы (Onion, CQS) и имеет необходимую квалификацию или ресурсы для обучения.

Предполагается наличие или возможность написания автоматизированных тестов (unit, интеграционных) для обеспечения безопасности рефакторинга.

Предполагается, что база данных и ее схема могут быть подвергнуты минимальным изменениям (например, для разделения моделей чтения/записи в рамках CQRS), но без полной переработки.

# Перечень нефункциональных требований

Нефункциональные требования описывают, как система должна работать, и направлены на интересы стейкхолдеров 3-6.

Поддерживаемость:

Ключевая цель рефакторинга. Система должна быть легко изменяемой для добавления новой функциональности и исправления ошибок. Onion-архитектура обеспечивает это за счет изоляции бизнес-логики и зависимостей.

Масштабируемость разработки:

С ростом команды и кодовой базы производительность разработчиков не должна падать. CQS и чистая архитектура позволяют разным командам работать над независимыми модулями (например, над командами записи и запросами чтения) с минимальными конфликтами. 
Возможность добавления нового разработчика в команду с выходом на уровень самостоятельной разработки в течение 1-2 недель за счет понятной структуры.

Тестируемость:

Необходима для безопасного рефакторинга и поддержки качества. Onion-архитектура с Dependency Injection позволяет легко подменять инфраструктурные зависимости (БД, внешние API) mock-объектами в unit-тестах.

Покрытие unit-тестами ключевой бизнес-логики (Domain слоя) должно составлять не менее 80%. Интеграционные тесты для сценариев использования (Application слоя) должны выполняться изолированно от реальной БД.
